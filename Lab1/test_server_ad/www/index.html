<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高级代理测试中心</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px 15px 0 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .test-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .test-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }

        .test-card.filter::before {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
        }

        .test-card.phishing::before {
            background: linear-gradient(90deg, #fa709a 0%, #fee140 100%);
        }

        .test-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }

        .test-card h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .test-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .test-btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: opacity 0.3s;
            margin-right: 10px;
            margin-top: 10px;
        }

        .test-btn:hover {
            opacity: 0.9;
        }

        .test-btn.secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .test-btn.phishing {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .info-section {
            background: white;
            border-radius: 0 0 15px 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .info-section h2 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .status-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        .status-table th,
        .status-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .status-table th {
            background: #f5f5f5;
            color: #333;
            font-weight: bold;
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .badge.allowed {
            background: #4CAF50;
            color: white;
        }

        .badge.blocked {
            background: #f44336;
            color: white;
        }

        .badge.redirected {
            background: #ff9800;
            color: white;
        }

        code {
            background: #f4f4f4;
            padding: 3px 8px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .warning-box h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .config-section {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .config-section h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .config-section pre {
            background: white;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🛡️ 高级代理服务器测试中心</h1>
            <p class="subtitle">测试网站过滤、用户过滤、网站引导功能</p>
        </header>

        <div class="test-grid">
            <!-- 网站过滤测试 -->
            <div class="test-card filter">
                <span class="test-icon">🚫</span>
                <h2>网站过滤测试</h2>
                <p>测试代理服务器阻止/允许访问特定网站的功能</p>
                <a href="filter-blocked.html" class="test-btn secondary">测试被阻止网站</a>
                <a href="filter-allowed.html" class="test-btn">测试允许网站</a>
            </div>

            <!-- 用户过滤测试 -->
            <div class="test-card filter">
                <span class="test-icon">👤</span>
                <h2>用户过滤测试</h2>
                <p>测试基于客户端IP的访问控制功能</p>
                <a href="user-check.php" class="test-btn secondary">检查我的IP</a>
                <!-- <a href="user-status.php" class="test-btn">查看访问状态</a> -->
            </div>

            <!-- 网站引导测试 -->
            <div class="test-card phishing">
                <span class="test-icon">🎣</span>
                <h2>网站引导测试</h2>
                <p>测试透明重定向和钓鱼模拟功能</p>
                <a href="http://baidu.com/phishing-demo.html" class="test-btn phishing">钓鱼演示</a>
                <!-- <a href="redirect-check.php" class="test-btn">重定向检查</a> -->
            </div>

            <!-- 缓存功能测试 -->
            <div class="test-card">
                <span class="test-icon">💾</span>
                <h2>缓存功能测试</h2>
                <p>验证HTTP缓存是否正常工作</p>
                <a href="cache-test.php" class="test-btn">缓存测试页面</a>
                <a href="no-cache-test.php" class="test-btn">无缓存测试</a>
            </div>

            <!-- 组合测试 -->
            <!-- <div class="test-card">
                <span class="test-icon">🔬</span>
                <h2>综合测试</h2>
                <p>测试多种功能的组合效果</p>
                <a href="combined-test.html" class="test-btn">运行综合测试</a>
                <a href="test-report.php" class="test-btn">查看测试报告</a>
            </div> -->

            <!-- 配置查看 -->
            <!-- <div class="test-card">
                <span class="test-icon">⚙️</span>
                <h2>配置查看</h2>
                <p>查看当前代理服务器的配置规则</p>
                <a href="view-config.html" class="test-btn">查看配置</a>
                <a href="help.html" class="test-btn">帮助文档</a>
            </div>
        </div> -->
<!-- 
        <div class="info-section">
            <h2>📖 测试说明</h2>

            <div class="warning-box">
                <h3>⚠️ 重要提示</h3>
                <p>在开始测试前，请确保：</p>
                <ul>
                    <li>已启动 ProxyServerAdvanced.exe</li>
                    <li>浏览器代理已配置为 <code>127.0.0.1:10240</code></li>
                    <li>已正确配置过滤规则文件（website_filter.txt, user_filter.txt, redirect.txt）</li>
                    <li>本地测试服务器已在端口 80 运行</li>
                </ul>
            </div>

            <h3>测试流程</h3>
            <ol>
                <li><strong>网站过滤测试：</strong>访问被阻止的网站应显示 403 Forbidden</li>
                <li><strong>用户过滤测试：</strong>被阻止的IP应无法访问任何资源</li>
                <li><strong>网站引导测试：</strong>访问被重定向的网站应显示本地模拟内容</li>
                <li><strong>缓存测试：</strong>刷新页面时间戳不应改变</li>
            </ol>

            <div class="config-section">
                <h3>📝 推荐测试配置</h3>
                <p><strong>website_filter.txt：</strong></p>
                <pre>deny blocked-site.test
allow allowed-site.test</pre>

                <p><strong>redirect.txt：</strong></p>
                <pre>phishing-target.test localhost
bank-demo.test localhost:80</pre>

                <p><strong>user_filter.txt：</strong></p>
                <pre># 根据实际IP配置
# deny 192.168.1.100
allow 127.0.0.1</pre>
            </div>

            <h3>预期测试结果</h3>
            <table class="status-table">
                <thead>
                    <tr>
                        <th>测试项</th>
                        <th>操作</th>
                        <th>预期结果</th>
                        <th>状态标记</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>网站过滤（阻止）</td>
                        <td>访问 filter-blocked.html</td>
                        <td>显示 403 Forbidden</td>
                        <td><span class="badge blocked">应被阻止</span></td>
                    </tr>
                    <tr>
                        <td>网站过滤（允许）</td>
                        <td>访问 filter-allowed.html</td>
                        <td>正常显示页面</td>
                        <td><span class="badge allowed">应允许</span></td>
                    </tr>
                    <tr>
                        <td>网站引导</td>
                        <td>访问 phishing-demo.html</td>
                        <td>显示本地模拟内容</td>
                        <td><span class="badge redirected">应重定向</span></td>
                    </tr>
                    <tr>
                        <td>HTTP缓存</td>
                        <td>刷新 cache-test.php</td>
                        <td>时间戳不变</td>
                        <td><span class="badge allowed">应缓存</span></td>
                    </tr>
                </tbody>
            </table>

            <h3>🔍 故障排查</h3>
            <ul>
                <li><strong>403错误意外出现：</strong>检查配置文件规则，确认域名匹配正确</li>
                <li><strong>重定向不生效：</strong>确认 redirect.txt 配置正确，目标服务器正在运行</li>
                <li><strong>缓存不工作：</strong>清除 cache 目录，检查 Last-Modified 头</li>
                <li><strong>所有请求被阻止：</strong>检查 user_filter.txt，确认客户端IP未被阻止</li>
            </ul>

            <p style="margin-top: 20px; color: #666;">
                <strong>注意：</strong>此测试环境仅用于学习和验证功能。网站引导（钓鱼）功能的使用必须遵守法律和道德规范。
            </p>
        </div>
    </div> -->

    <script>
        // 显示当前浏览器信息
        console.log('=== 测试环境信息 ===');
        console.log('浏览器：', navigator.userAgent);
        console.log('当前URL：', window.location.href);
        console.log('访问时间：', new Date().toLocaleString());
    </script>
</body>
</html>
